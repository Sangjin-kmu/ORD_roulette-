<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>듀얼컨텐츠 룰렛</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <header class="top">
    <div class="title">듀얼컨텐츠 룰렛</div>
  </header>

  <main class="wrap">
    <section class="panel">

      <section id="lobbyUI" class="lobby">
        <div class="lobbyCard">
          <div class="lobbyTitle">방 만들기 / 참여하기</div>
          <div class="lobbySub">닉네임을 입력하면 방 안에서 표시됩니다. (미입력 시 익명)</div>

          <div class="nickRow">
            <div class="nickLabel">닉네임</div>
            <input id="nickInput" class="nickInput" placeholder="예: sseutte" maxlength="16" />
          </div>

          <div class="bigBtnRow">
            <button id="createRoomBtn" class="btnBig">방 만들기</button>
            <button id="openJoinBtn" class="btnBig btnGhost">참여하기</button>
          </div>

          <div id="lobbyInfo" class="lobbyInfo">—</div>
        </div>
      </section>

      <section id="roomUI" class="hidden">
        <div class="roomTopRow">
          <div id="roomInfo" class="roomCode">방 코드: —</div>
          <button id="copyRoomCodeBtn" class="btnSub">코드 복사</button>
          <button id="leaveRoomBtn" class="btnSub">나가기</button>
        </div>

        <div class="membersCard">
          <div class="membersTitle">입장 인원</div>
          <div id="memberCount" class="membersSub">0명</div>
          <ul id="memberList" class="memberList"></ul>
        </div>

        <div class="mainBox">
          <div class="label">선택된 룰</div>
          <div id="pickedRule" class="picked">룰을 뽑아주세요</div>

          <button id="spinMainBtn" class="btnMain">룰 뽑기!</button>

          <button id="toggleRulesBtn" class="toggle">
            전체 룰 목록 보기 (<span id="ruleCount">0</span>개) <span id="chev">▼</span>
          </button>
          <button id="openUnitFilterBtn" class="btnSub">유닛 포함 설정</button>

          <div id="ruleListWrap" class="ruleList hidden">
            <ul id="ruleList"></ul>
          </div>
        </div>

        <div class="hr"></div>

        <section class="detail">
          <div class="detailTitle">설명</div>
          <div id="desc" class="desc">아래 '룰 뽑기' 버튼을 눌러 시작하세요.</div>
        </section>

        <section class="extra">
          <div class="detailTitle">추가 룰렛 / 결과</div>
          <div id="extraArea" class="stack"></div>
        </section>
      </section>

    </section>
  </main>

  <div id="joinOverlay" class="overlay hidden">
    <div class="overlayCard">
      <div class="overlayTitle">방 참여하기</div>
      <div class="overlaySub">방 코드를 입력하세요.</div>

      <input id="joinRoomInput" class="joinInput" placeholder="예: A1B2C3" maxlength="12" />

      <div class="overlayBtnRow">
        <button id="joinRoomBtn" class="overlayBtn">입장</button>
        <button id="closeJoinBtn" class="overlayBtn overlayBtnGhost">닫기</button>
      </div>

      <div id="joinInfo" class="overlaySub">—</div>
    </div>
  </div>

  <div id="toastRoot"></div>

  <div id="unitFilterOverlay" class="overlay hidden">
    <div class="overlayCard ufCard">
      <div class="overlayTitle">유닛 포함 설정</div>
      <div class="overlaySub">체크된 유닛만 룰렛에 등장합니다. (방장만 변경 가능)</div>

      <div class="ufSection">
        <div class="ufHead">
          <div class="ufTitle">상위 유닛</div>
          <div class="ufActions">
            <button id="ufHighAllBtn" class="btnSub" type="button">전체</button>
          </div>
        </div>
        <div id="ufHighList" class="ufList"></div>
      </div>

      <div class="ufSection">
        <div class="ufHead">
          <div class="ufTitle">전설</div>
          <div class="ufActions">
            <button id="ufLegendAllBtn" class="btnSub" type="button">전체</button>
          </div>
        </div>
        <div id="ufLegendList" class="ufList"></div>
      </div>

      <div class="ufSection">
        <div class="ufHead">
          <div class="ufTitle">히든</div>
          <div class="ufActions">
            <button id="ufHiddenAllBtn" class="btnSub" type="button">전체</button>
          </div>
        </div>
        <div id="ufHiddenList" class="ufList"></div>
      </div>

      <div class="btnRow">
        <button id="ufApplyBtn" class="btnSub" type="button">적용</button>
        <button id="ufCloseBtn" class="btnSub" type="button">닫기</button>
      </div>
    </div>
  </div>


  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>

  <script src="./app.js"></script>
</body>
</html>
